%%% The main file. It contains definitions of basic parameters and includes all other parts.


%% Settings for two-sided (duplex) printing
\documentclass[10pt,a4paper]{report}
\let\openright=\cleardoublepage

%% Character encoding: usually latin2, cp1250 or utf8:
\usepackage[utf8]{inputenc}

%% It's 2019
\usepackage[default]{droidserif}
\usepackage[T1]{fontenc}

%% Further useful packages (included in most LaTeX distributions)
\usepackage{amsmath}        % extensions for typesetting of math
\usepackage{amsfonts}       % math fonts
\usepackage{graphicx}       % embedding of pictures
\usepackage{tikz}
%\usetikzlibrary{shapes,fit,positioning,snakes,mindmap,trees,decorations.text,arrows.meta}
%\makenomenclature
\usepackage{algorithm,algpseudocode}
\usepackage{booktabs}
\usepackage{mwe}
\usepackage{afterpage}
\usepackage{pgfgantt}
\usepackage{pdflscape}
\usepackage{geometry}
\usepackage{enumitem}
\usepackage{float}
\usepackage{framed}
\usepackage{titlesec}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{longtable}
\usepackage{makecell}
\usepackage[toc,page]{appendix}
\usepackage{multirow}

\lstset{basicstyle=\ttfamily,
	showstringspaces=false,
	commentstyle=\color{red},
	keywordstyle=\color{blue}
}

\usepackage{pdfpages}

\usepackage[textsize=tiny,backgroundcolor=yellow!50, linecolor=black!25]{todonotes}

% links shall be clickable
\usepackage[unicode]{hyperref}   % Must follow all other packages
\usepackage{cleveref} % Must follow all other packages including hyperref

\usepackage{filecontents}
\begin{filecontents*}{indexDepth3.xdy}
	(markup-indexentry :open "~n      \subIIIitem " :depth 3)
\end{filecontents*}

%This is from this guide to multi level indices: https://sourceforge.net/p/xindy/mailman/message/23935039/
%It seems it does not do anything in our case so I commented it
%\makeatletter
%\renewenvironment{theindex}
%{\raggedright\small\let\item\@idxitem \parskip .0pt\@plus .3\p@\relax}{}
%\makeatother

\usepackage{makeidx}
\providecommand*\lettergroup[1]{}
\makeindex

\makeatletter
\newcommand\subIIIitem{\@idxitem \hspace*{40\p@}}
\makeatother

% Definitions of macros (see description inside)
\include{macros}

\title{\textcool{\bf High Level Assembler Plugin} \\ Project documentation}
\author{Michal Bali, Marcel Hruška, Peter Polák,\\ Adam Šmelko, Lucia Tódová}
\date{Supervisor: Miroslav Kratochvíl \\ \vspace{5mm} Consultant: Slavomír Kučera (Broadcom)}

% Title page and various mandatory informational pages
\begin{document}
\maketitle

%%% A page with automatically generated table of contents of the bachelor thesis

\tableofcontents

%%% Each chapter is kept in a separate file

\include{preface}
\part{Project overview}
\include{hlasm}
\include{architecture}

\part{Component description}
\include{language_server}
\include{workspace_manager}

\include{analyzer_overview}
\include{processing}
\include{checker}
\include{lexer_parser}
\include{context}

\include{macro_tracer}
\include{extension}
\include{build_guide}

\bibliography{biblio} 
\bibliographystyle{apalike}

\printindex
\begin{appendices}


%\includepdf[pages=-,fitpage=true]{all_arch.pdf}

\newenvironment{foldoutfloat}{%
	\eject\pdfpageheight=52cm\pdfpagewidth=40cm
	\newgeometry{margin=1in}
	\textwidth=15in
	\begin{figure}[p]
	}{%
	\end{figure}
	\clearpage % otherwise it will float to another, non-resized page
	\eject\pdfpageheight=11in\pdfpagewidth=8.5in
	\restoregeometry
}%

\begin{foldoutfloat}
	\chapter{Architecture of the project}
	\label{all_arch}
	\thispagestyle{empty}

	\includegraphics[width=35cm]{img/all_arch}
	\caption{Architecture of the whole project}
\end{foldoutfloat}



\end{appendices}

\end{document}
