\chapter{External Macro Libraries and COPY Members}
\label{chap:configuration}

The HLASM Language Support extension looks for locally stored members when a macro or COPY instruction is evaluated. The paths of these members are specified in two configuration files in the \emph{.hlasmplugin} folder of the currently open workspace. Ensure that you configure these files before using macros from separate files or the COPY instruction.

When you open a HLASM file or manually set the HLASM language for a file, you can choose to automatically create these files for the current program.

The structure of the configuration is based on CA EndevorÂ® SCM. \emph{proc\_grps.json} defines processor groups by assigning a group name to a list of directories which are searched in the order they are listed. \emph{pgm\_conf.json} provides mapping between source files (open code files) and processor groups. It specifies which list of directories is used with which source file. If a relative source file path is specified, it is relative to the current workspace.

\begin{listing}[H]
	\begin{verbatim}
{
  "pgroups": [
    {
      "name":"GROUP1",
      "libs": [
        "ASMMAC/",
        "C:/SYS.ASMMAC"
      ]
    },
    {
      "name":"GROUP2",
      "libs": [
        "G2MAC/",
        "C:/SYS.ASMMAC"
      ]
    }
  ]
}
	\end{verbatim}
	\caption{This example defines two processor groups, GROUP1 and GROUP2, and a list of directories to search for macros and COPY files.}
\end{listing}

If you have the two configuration files configured as above and invoke the MAC1 macro from \emph{source\_code.hlasm}, the folder \emph{ASMMAC/} in the current workspace is searched for a file with the exact name MAC1. If that search is unsuccessful the folder \emph{C:/SYS.ASMMAC} is searched. If that search is unsuccessful an error displays that the macro does not exist.

\begin{listing}[H]
	\begin{verbatim}
{
  "pgms": [
    {
      "program": "source_code",
      "pgroup": "GROUP1"
    },
    {
      "program": "second_file",
      "pgroup": "GROUP2"
    },
  ]
}
	\end{verbatim}
	\caption{The following example specifies that GROUP1 is used when working with \emph{source\_code.hlasm} and GROUP2 is used when working with \emph{second\_file.hlasm}}
\end{listing}

There is also the option \emph{alwaysRecognize} which takes an array of wildcards. It allows you to configure two things:
\begin{itemize}
	\item All files matching these wildcards will always be recognized as HLASM files. 
	\item If an extension wildcard is defined, all macro and copy files with such extension may be used in the source code. For example, with the extension wildcard \emph{*.hlasm}, a user may add macro MAC to his source code even if it is in a file called \emph{Mac.hlasm}.
\end{itemize}

\begin{listing}[H]
	\begin{verbatim}
{
  "pgms": [
    {
      "program": "*",
      "pgroup": "GROUP1"  
    }
  ]
}
	\end{verbatim}
	\caption{In this example, GROUP1 is used for all open code programs.}
\end{listing}